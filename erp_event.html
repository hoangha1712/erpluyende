<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ERP - ƒê∆∞·ªùng ƒêua Sƒ© T·ª≠</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Base styles */
        .gradient-orange { background: linear-gradient(135deg, #FF7A45 0%, #FFA500 100%); }
        .modal { display: none; position: fixed; z-index: 50; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center; }
        .modal.show { display: flex; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        [contenteditable]:empty:before { content: attr(placeholder); color: #9CA3AF; }

        /* Styles from duong-dua-si-tu-erp.html */
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15); }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .gradient-blue { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .gradient-green { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .gradient-purple { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
        
        .status-badge { display: inline-flex; align-items: center; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }
        .status-active { background: #D1FAE5; color: #065F46; }
        .status-draft { background: #FEF3C7; color: #92400E; }
        .status-ended { background: #F3F4F6; color: #374151; }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    
    <!-- Sidebar -->
    <div class="fixed left-0 top-0 w-64 h-screen bg-slate-800 border-r border-slate-700 z-20 overflow-y-auto">
        <div class="p-6 border-b border-slate-700">
            <h1 class="text-2xl font-bold text-orange-500">üìö Luy·ªán ƒê·ªÅ ERP</h1>
            <p class="text-sm text-slate-400 mt-2">Event Management v1.0</p>
        </div>
        
        <nav class="p-4 space-y-2">
            <a href="#" onclick="showTab('dashboard-tab')" class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-700 hover:text-white transition">
                <span class="text-xl">üìä</span>
                <span class="text-sm font-medium">Dashboard</span>
            </a>
            <a href="#" onclick="showTab('events-tab')" class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-700 hover:text-white transition">
                <span class="text-xl">üéØ</span>
                <span class="text-sm font-medium">Events</span>
            </a>
            <a href="#" onclick="showTab('tasks-tab')" class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-700 hover:text-white transition">
                <span class="text-xl">‚ö°</span>
                <span class="text-sm font-medium">Nhi·ªám V·ª•</span>
            </a>
            <a href="#" onclick="showTab('rewards-tab')" class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-700 hover:text-white transition">
                <span class="text-xl">üéÅ</span>
                <span class="text-sm font-medium">Gi·∫£i Th∆∞·ªüng</span>
            </a>
            <a href="#" onclick="showTab('reports-tab')" class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-700 hover:text-white transition">
                <span class="text-xl">üìà</span>
                <span class="text-sm font-medium">B√°o C√°o</span>
            </a>
            <a href="#" onclick="showTab('settings-tab')" class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-700 hover:text-white transition">
                <span class="text-xl">‚öôÔ∏è</span>
                <span class="text-sm font-medium">C√†i ƒê·∫∑t</span>
            </a>
        </nav>
    </div>
    
    <!-- Main Content -->
    <div class="ml-64 p-8">
        
        <!-- Dashboard Tab -->
        <div id="dashboard-tab" class="tab-content active">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800">Dashboard Overview</h2>
                <p class="text-gray-600 mt-2">T·ªïng quan v·ªÅ t·∫•t c·∫£ c√°c s·ª± ki·ªán ƒê∆∞·ªùng ƒêua Sƒ© T·ª≠</p>
            </div>
            
            <!-- Metrics Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-xl p-6 shadow-md card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 rounded-lg gradient-orange flex items-center justify-center text-white text-2xl">
                            üéØ
                        </div>
                        <span class="text-xs text-green-600 font-semibold bg-green-100 px-2 py-1 rounded">+12%</span>
                    </div>
                    <h3 class="text-gray-600 text-sm mb-1">T·ªïng Events</h3>
                    <p class="text-3xl font-bold text-gray-800">12</p>
                    <p class="text-xs text-gray-500 mt-2">3 ƒëang ho·∫°t ƒë·ªông</p>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-md card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 rounded-lg gradient-blue flex items-center justify-center text-white text-2xl">
                            üë•
                        </div>
                        <span class="text-xs text-green-600 font-semibold bg-green-100 px-2 py-1 rounded">+24%</span>
                    </div>
                    <h3 class="text-gray-600 text-sm mb-1">T·ªïng User Tham Gia</h3>
                    <p class="text-3xl font-bold text-gray-800">45,230</p>
                    <p class="text-xs text-gray-500 mt-2">8,420 tu·∫ßn n√†y</p>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-md card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 rounded-lg gradient-green flex items-center justify-center text-white text-2xl">
                            üèÜ
                        </div>
                        <span class="text-xs text-green-600 font-semibold bg-green-100 px-2 py-1 rounded">+15%</span>
                    </div>
                    <h3 class="text-gray-600 text-sm mb-1">User ƒê·∫°t Gi·∫£i</h3>
                    <p class="text-3xl font-bold text-gray-800">1,856</p>
                    <p class="text-xs text-gray-500 mt-2">T·ª∑ l·ªá ƒë·∫°t gi·∫£i: 4.1%</p>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-md card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 rounded-lg gradient-purple flex items-center justify-center text-white text-2xl">
                            üéÅ
                        </div>
                        <span class="text-xs text-red-600 font-semibold bg-red-100 px-2 py-1 rounded">-5%</span>
                    </div>
                    <h3 class="text-gray-600 text-sm mb-1">Gi√° Tr·ªã Gi·∫£i Th∆∞·ªüng</h3>
                    <p class="text-3xl font-bold text-gray-800">295M</p>
                    <p class="text-xs text-gray-500 mt-2">1,856 user ƒë·∫°t gi·∫£i</p>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="bg-white rounded-xl p-6 shadow-md mb-8">
                <h3 class="text-lg font-bold text-gray-800 mb-4">Quick Actions</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <button onclick="showTab('events-tab'); openModal('createEventModal')" class="flex items-center gap-3 p-4 border-2 border-dashed border-orange-300 rounded-lg hover:bg-orange-50 transition">
                        <span class="text-2xl">‚ûï</span>
                        <div class="text-left">
                            <p class="font-semibold text-gray-800">T·∫°o Event M·ªõi</p>
                            <p class="text-xs text-gray-500">B·∫Øt ƒë·∫ßu s·ª± ki·ªán m·ªõi</p>
                        </div>
                    </button>
                    
                    <button onclick="showTab('tasks-tab')" class="flex items-center gap-3 p-4 border-2 border-dashed border-blue-300 rounded-lg hover:bg-blue-50 transition">
                        <span class="text-2xl">üìù</span>
                        <div class="text-left">
                            <p class="font-semibold text-gray-800">Qu·∫£n L√Ω Nhi·ªám V·ª•</p>
                            <p class="text-xs text-gray-500">Xem v√† ch·ªânh s·ª≠a tasks</p>
                        </div>
                    </button>
                    
                    <button onclick="showTab('reports-tab')" class="flex items-center gap-3 p-4 border-2 border-dashed border-green-300 rounded-lg hover:bg-green-50 transition">
                        <span class="text-2xl">üìä</span>
                        <div class="text-left">
                            <p class="font-semibold text-gray-800">Xem B√°o C√°o</p>
                            <p class="text-xs text-gray-500">Analytics & insights</p>
                        </div>
                    </button>
                </div>
            </div>
            
            <!-- Recent Events -->
            <div class="bg-white rounded-xl p-6 shadow-md">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-bold text-gray-800">S·ª± Ki·ªán G·∫ßn ƒê√¢y</h3>
                    <button onclick="showTab('events-tab')" class="text-sm text-orange-500 hover:text-orange-600 font-semibold">Xem t·∫•t c·∫£ ‚Üí</button>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-lg gradient-orange flex items-center justify-center text-white font-bold">
                                DDST1
                            </div>
                            <div>
                                <p class="font-semibold text-gray-800">ƒê∆∞·ªùng ƒêua Sƒ© T·ª≠ 1</p>
                                <p class="text-xs text-gray-500">01/10/2025 - 31/10/2025</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="text-right">
                                <p class="text-sm font-semibold text-gray-800">1,856 users</p>
                                <p class="text-xs text-gray-500">100 ƒë·∫°t gi·∫£i</p>
                            </div>
                            <span class="status-badge status-active">ƒêang di·ªÖn ra</span>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-lg gradient-blue flex items-center justify-center text-white font-bold">
                                DDST2
                            </div>
                            <div>
                                <p class="font-semibold text-gray-800">ƒê∆∞·ªùng ƒêua Sƒ© T·ª≠ 2</p>
                                <p class="text-xs text-gray-500">01/11/2025 - 30/11/2025</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="text-right">
                                <p class="text-sm font-semibold text-gray-800">3,421 users</p>
                                <p class="text-xs text-gray-500">156 ƒë·∫°t gi·∫£i</p>
                            </div>
                            <span class="status-badge status-ended">ƒê√£ k·∫øt th√∫c</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Events Tab -->
        <div id="events-tab" class="tab-content">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-3xl font-bold text-gray-800">üéØ Qu·∫£n L√Ω Events</h2>
                <button onclick="openModal('createEventModal')" class="gradient-orange text-white px-6 py-3 rounded-lg font-semibold hover:shadow-lg transition">
                    ‚ûï T·∫°o Event M·ªõi
                </button>
            </div>
            
            <!-- Events Table -->
            <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden">
                <table class="w-full">
                    <thead class="bg-gray-100 border-b border-gray-200">
                        <tr>
                            <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700">Event</th>
                            <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700">Th·ªùi gian</th>
                            <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700">Gi·∫£i th∆∞·ªüng</th>
                            <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700">Nhi·ªám v·ª•</th>
                            <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">Tr·∫°ng th√°i</th>
                            <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                        <tr class="hover:bg-gray-50 transition">
                            <td class="px-6 py-4">
                                <p class="font-semibold text-gray-800">ƒê∆∞·ªùng ƒëua sƒ© t·ª≠ 1</p>
                                <p class="text-xs text-gray-500">DDST1</p>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-600">01/10/2025 - 31/10/2025</td>
                            <td class="px-6 py-4 text-sm text-gray-600">5,000,000 VNƒê</td>
                            <td class="px-6 py-4 text-sm text-gray-600">8 nhi·ªám v·ª•</td>
                            <td class="px-6 py-4 text-center">
                                <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold">ƒêang di·ªÖn ra</span>
                            </td>
                            <td class="px-6 py-4 text-center">
                                <button class="text-blue-600 hover:text-blue-800 text-sm font-semibold">üëÅÔ∏è Xem</button>
                            </td>
                        </tr>
                        <tr class="hover:bg-gray-50 transition">
                            <td class="px-6 py-4">
                                <p class="font-semibold text-gray-800">ƒê∆∞·ªùng ƒëua sƒ© t·ª≠ 2</p>
                                <p class="text-xs text-gray-500">DDST2</p>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-600">01/11/2025 - 30/11/2025</td>
                            <td class="px-6 py-4 text-sm text-gray-600">15,000,000 VNƒê</td>
                            <td class="px-6 py-4 text-sm text-gray-600">5 nhi·ªám v·ª•</td>
                            <td class="px-6 py-4 text-center">
                                <span class="px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold">ƒê√£ k·∫øt th√∫c</span>
                            </td>
                            <td class="px-6 py-4 text-center">
                                <button class="text-blue-600 hover:text-blue-800 text-sm font-semibold">üëÅÔ∏è Xem</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Tasks Tab -->
        <div id="tasks-tab" class="tab-content">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">‚ö° Qu·∫£n L√Ω Nhi·ªám V·ª•</h2>
            <div class="bg-white rounded-lg p-6 shadow-md border border-gray-200">
                <p class="text-gray-600">Task management interface...</p>
            </div>
        </div>
        
        <!-- Rewards Tab -->
        <div id="rewards-tab" class="tab-content">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-3xl font-bold text-gray-800">üéÅ Qu·∫£n L√Ω Gi·∫£i Th∆∞·ªüng</h2>
                <button onclick="openModal('createRewardModal')" class="gradient-orange text-white px-6 py-3 rounded-lg font-semibold hover:shadow-lg transition">
                    ‚ûï T·∫°o Gi·∫£i Th∆∞·ªüng M·ªõi
                </button>
            </div>
            
            <!-- Rewards Table -->
            <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden">
                <table class="w-full">
                    <thead class="bg-gray-100 border-b border-gray-200">
                        <tr>
                            <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700">T√™n gi·∫£i th∆∞·ªüng</th>
                            <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700">M√£</th>
                            <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700">Gi√° tr·ªã</th>
                            <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">S·ªë l∆∞·ª£ng</th>
                            <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                        <tr class="hover:bg-gray-50 transition">
                            <td class="px-6 py-4 font-semibold text-gray-800">ƒê∆∞·ªùng ƒëua sƒ© t·ª≠ 1</td>
                            <td class="px-6 py-4 text-sm text-gray-600">DDST1</td>
                            <td class="px-6 py-4 text-sm text-gray-600">5,000,000 VNƒê</td>
                            <td class="px-6 py-4 text-center text-sm text-gray-600">100</td>
                            <td class="px-6 py-4 text-center">
                                <button class="text-blue-600 hover:text-blue-800 text-sm font-semibold">üëÅÔ∏è Xem</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Reports Tab -->
        <div id="reports-tab" class="tab-content">
            <!-- Level 1: List Events -->
            <div id="reports-level1">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">üìà B√°o C√°o Events</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white rounded-lg p-6 shadow-md border border-gray-200">
                        <p class="text-sm text-gray-600 mb-2">T·ªïng Events</p>
                        <p class="text-3xl font-bold text-gray-800">12</p>
                    </div>
                    <div class="bg-white rounded-lg p-6 shadow-md border border-gray-200">
                        <p class="text-sm text-gray-600 mb-2">T·ªïng User Nh·∫≠n Gi·∫£i</p>
                        <p class="text-3xl font-bold text-gray-800">1,856</p>
                    </div>
                    <div class="bg-white rounded-lg p-6 shadow-md border border-gray-200">
                        <p class="text-sm text-gray-600 mb-2">Gi√° Tr·ªã Gi·∫£i</p>
                        <p class="text-3xl font-bold text-gray-800">45,230,000</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-100 border-b border-gray-200">
                            <tr>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700">S·ª± ki·ªán</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700">Th·ªùi gian</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">S·ªë ng∆∞·ªùi nh·∫≠n gi·∫£i</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">Tr·∫°ng th√°i</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">Actions</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr class="hover:bg-gray-50 transition">
                                <td class="px-6 py-4 font-semibold text-gray-800">ƒê∆∞·ªùng ƒëua sƒ© t·ª≠ 1</td>
                                <td class="px-6 py-4 text-sm text-gray-600">01/10/2025 - 31/10/2025</td>
                                <td class="px-6 py-4 text-center text-sm font-semibold text-gray-800">100</td>
                                <td class="px-6 py-4 text-center">
                                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold">ƒêang di·ªÖn ra</span>
                                </td>
                                <td class="px-6 py-4 text-center">
                                    <div class="flex items-center justify-center gap-2">
                                        <button onclick="showEventWinners('DDST1')" class="text-blue-600 hover:text-blue-800 text-sm font-semibold bg-blue-50 px-3 py-1 rounded">üëÅÔ∏è Ng∆∞·ªùi nh·∫≠n gi·∫£i</button>
                                        <button onclick="showEventTaskStats('DDST1')" class="text-orange-600 hover:text-orange-800 text-sm font-semibold bg-orange-50 px-3 py-1 rounded">üìä Th·ªëng k√™ Task</button>
                                    </div>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50 transition">
                                <td class="px-6 py-4 font-semibold text-gray-800">ƒê∆∞·ªùng ƒëua sƒ© t·ª≠ 2</td>
                                <td class="px-6 py-4 text-sm text-gray-600">01/11/2025 - 30/11/2025</td>
                                <td class="px-6 py-4 text-center text-sm font-semibold text-gray-800">156</td>
                                <td class="px-6 py-4 text-center">
                                    <span class="px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold">ƒê√£ k·∫øt th√∫c</span>
                                </td>
                                <td class="px-6 py-4 text-center">
                                    <div class="flex items-center justify-center gap-2">
                                        <button onclick="showEventWinners('DDST2')" class="text-blue-600 hover:text-blue-800 text-sm font-semibold bg-blue-50 px-3 py-1 rounded">üëÅÔ∏è Ng∆∞·ªùi nh·∫≠n gi·∫£i</button>
                                        <button onclick="showEventTaskStats('DDST2')" class="text-orange-600 hover:text-orange-800 text-sm font-semibold bg-orange-50 px-3 py-1 rounded">üìä Th·ªëng k√™ Task</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Level 2: List Winners in Event -->
            <div id="reports-level2" style="display:none;">
                <div class="mb-6">
                    <button onclick="backToReportsLevel1()" class="text-blue-600 hover:text-blue-800 font-semibold mb-4">‚Üê Quay l·∫°i danh s√°ch events</button>
                    <h2 class="text-3xl font-bold text-gray-800">üë• Danh S√°ch Ng∆∞·ªùi Nh·∫≠n Gi·∫£i - <span id="eventNameL2">Event</span></h2>
                </div>
                
                <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-100 border-b border-gray-200">
                            <tr>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700">H·ªç t√™n</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700">User ID</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">ƒêi·ªÉm ƒë·∫°t ƒë∆∞·ª£c</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">X·∫øp h·∫°ng</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">Th·ªùi gian ho√†n th√†nh</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">Actions</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200" id="winnersTableBody">
                            <tr class="hover:bg-gray-50 transition">
                                <td class="px-6 py-4 font-semibold text-gray-800">Nguy·ªÖn VƒÉn A</td>
                                <td class="px-6 py-4 text-sm text-gray-600">124562</td>
                                <td class="px-6 py-4 text-center text-sm font-semibold text-orange-600">100/100</td>
                                <td class="px-6 py-4 text-center text-sm font-semibold text-gray-800">ü•á #1</td>
                                <td class="px-6 py-4 text-center text-sm text-gray-600">10/10/2025</td>
                                <td class="px-6 py-4 text-center">
                                    <button onclick="showUserTasks('124562', 'DDST1')" class="text-blue-600 hover:text-blue-800 text-sm font-semibold">üëÅÔ∏è Chi ti·∫øt nhi·ªám v·ª•</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Level 2: TASK STATS (New Feature) -->
            <div id="reports-level2-tasks" style="display:none;">
                <div class="mb-6 flex justify-between items-end">
                    <div>
                        <button onclick="backToReportsLevel1FromTasks()" class="text-blue-600 hover:text-blue-800 font-semibold mb-4">‚Üê Quay l·∫°i danh s√°ch events</button>
                        <h2 class="text-3xl font-bold text-gray-800">üìä Th·ªëng K√™ Nhi·ªám V·ª• - <span id="eventNameL2Tasks">Event</span></h2>
                        <p class="text-gray-600 mt-2">Ph√¢n t√≠ch chi ti·∫øt hi·ªáu qu·∫£ t·ª´ng nhi·ªám v·ª• ƒë·ªÉ t·ªëi ∆∞u event sau.</p>
                    </div>
                    <div class="text-right">
                        <p class="text-sm text-gray-500">T·ªïng t∆∞∆°ng t√°c</p>
                        <p class="text-2xl font-bold text-blue-600">14,250</p>
                    </div>
                </div>

                <!-- Top Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <!-- Hot Task -->
                    <div class="bg-white rounded-xl p-6 shadow-md border-l-4 border-green-500">
                        <div class="flex items-start justify-between">
                            <div>
                                <p class="text-sm font-bold text-gray-500 uppercase tracking-wider">üî• Nhi·ªám v·ª• Hot nh·∫•t</p>
                                <h3 class="text-xl font-bold text-gray-800 mt-1">ƒêƒÉng nh·∫≠p h√†ng ng√†y</h3>
                                <p class="text-sm text-gray-600 mt-2">D·ªÖ th·ª±c hi·ªán, user quay l·∫°i ƒë·ªÅu ƒë·∫∑n.</p>
                            </div>
                            <div class="text-right">
                                <p class="text-3xl font-bold text-green-600">8,420</p>
                                <p class="text-xs text-gray-500">l∆∞·ª£t ho√†n th√†nh</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Hard Task -->
                    <div class="bg-white rounded-xl p-6 shadow-md border-l-4 border-red-500">
                        <div class="flex items-start justify-between">
                            <div>
                                <p class="text-sm font-bold text-gray-500 uppercase tracking-wider">‚ö†Ô∏è Nhi·ªám v·ª• Kh√≥ nh·∫•t</p>
                                <h3 class="text-xl font-bold text-gray-800 mt-1">M·ªùi 3 b·∫°n b√® (SƒêT)</h3>
                                <p class="text-sm text-gray-600 mt-2">R√†o c·∫£n cao, c·∫ßn c√¢n nh·∫Øc gi·∫£m ƒëi·ªÅu ki·ªán.</p>
                            </div>
                            <div class="text-right">
                                <p class="text-3xl font-bold text-red-600">320</p>
                                <p class="text-xs text-gray-500">l∆∞·ª£t ho√†n th√†nh</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Table -->
                <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
                        <h3 class="font-bold text-gray-800">Chi ti·∫øt t·ª´ng nhi·ªám v·ª•</h3>
                    </div>
                    <table class="w-full">
                        <thead class="bg-gray-100 border-b border-gray-200">
                            <tr>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700 w-1/3">T√™n nhi·ªám v·ª•</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700">Lo·∫°i</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">L∆∞·ª£t ho√†n th√†nh</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700 w-1/3">Thanh so s√°nh (Visual)</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">T·ª∑ l·ªá</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200" id="taskStatsTableBody">
                            <!-- Task 1: High -->
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4">
                                    <p class="font-semibold text-gray-800">‚ö° ƒêƒÉng nh·∫≠p h√†ng ng√†y</p>
                                </td>
                                <td class="px-6 py-4 text-sm text-gray-600">Daily</td>
                                <td class="px-6 py-4 text-center font-bold text-gray-800">8,420</td>
                                <td class="px-6 py-4">
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <div class="bg-green-500 h-2.5 rounded-full" style="width: 95%"></div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 text-center text-green-600 font-bold">95%</td>
                            </tr>
                            
                            <!-- Task 2: Medium -->
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4">
                                    <p class="font-semibold text-gray-800">üì± Chia s·∫ª Facebook</p>
                                </td>
                                <td class="px-6 py-4 text-sm text-gray-600">Social</td>
                                <td class="px-6 py-4 text-center font-bold text-gray-800">4,150</td>
                                <td class="px-6 py-4">
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <div class="bg-blue-500 h-2.5 rounded-full" style="width: 45%"></div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 text-center text-blue-600 font-bold">45%</td>
                            </tr>

                            <!-- Task 3: Low -->
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4">
                                    <p class="font-semibold text-gray-800">üë• M·ªùi 3 b·∫°n b√® (SƒêT)</p>
                                </td>
                                <td class="px-6 py-4 text-sm text-gray-600">Referral</td>
                                <td class="px-6 py-4 text-center font-bold text-gray-800">320</td>
                                <td class="px-6 py-4">
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <div class="bg-red-500 h-2.5 rounded-full" style="width: 5%"></div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 text-center text-red-600 font-bold">5%</td>
                            </tr>

                            <!-- Task 4: Medium -->
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4">
                                    <p class="font-semibold text-gray-800">üìö L√†m ƒë·ªÅ thi th·ª≠</p>
                                </td>
                                <td class="px-6 py-4 text-sm text-gray-600">Practice</td>
                                <td class="px-6 py-4 text-center font-bold text-gray-800">1,200</td>
                                <td class="px-6 py-4">
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <div class="bg-yellow-500 h-2.5 rounded-full" style="width: 15%"></div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 text-center text-yellow-600 font-bold">15%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Level 3: User Task Details -->
            <div id="reports-level3" style="display:none;">
                <div class="mb-6">
                    <button onclick="backToReportsLevel2()" class="text-blue-600 hover:text-blue-800 font-semibold mb-4">‚Üê Quay l·∫°i danh s√°ch ng∆∞·ªùi nh·∫≠n gi·∫£i</button>
                    <h2 class="text-3xl font-bold text-gray-800">üìã Chi Ti·∫øt Nhi·ªám V·ª• - <span id="userNameL3">User</span></h2>
                    <p class="text-sm text-gray-600 mt-2">Event: <span id="eventNameL3">-</span> | User ID: <span id="userIdL3">-</span></p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                    <div class="bg-white rounded-lg p-4 shadow-md border border-gray-200">
                        <p class="text-xs text-gray-600 mb-1">T·ªïng Nhi·ªám V·ª•</p>
                        <p class="text-2xl font-bold text-gray-800" id="totalTasksL3">10</p>
                    </div>
                    <div class="bg-white rounded-lg p-4 shadow-md border border-gray-200">
                        <p class="text-xs text-gray-600 mb-1">Ho√†n Th√†nh</p>
                        <p class="text-2xl font-bold text-green-600" id="completedTasksL3">10</p>
                    </div>
                    <div class="bg-white rounded-lg p-4 shadow-md border border-gray-200">
                        <p class="text-xs text-gray-600 mb-1">T·ªïng ƒêi·ªÉm</p>
                        <p class="text-2xl font-bold text-orange-600" id="totalPointsL3">100</p>
                    </div>
                    <div class="bg-white rounded-lg p-4 shadow-md border border-gray-200">
                        <p class="text-xs text-gray-600 mb-1">X·∫øp H·∫°ng</p>
                        <p class="text-2xl font-bold text-gray-800" id="rankL3">#1</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-100 border-b border-gray-200">
                            <tr>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700">Nhi·ªám v·ª•</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">ƒêi·ªÉm ƒë·∫°t ƒë∆∞·ª£c</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">Th·ªùi gian b·∫Øt ƒë·∫ßu</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">Th·ªùi gian ho√†n th√†nh</th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-700">Tr·∫°ng th√°i</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200" id="userTasksTableBody">
                            <tr class="hover:bg-gray-50 transition">
                                <td class="px-6 py-4">
                                    <p class="font-semibold text-gray-800">‚ö° ƒêƒÉng nh·∫≠p h√†ng ng√†y</p>
                                    <p class="text-xs text-gray-500">Auto verification</p>
                                </td>
                                <td class="px-6 py-4 text-center text-sm font-semibold text-orange-600">20</td>
                                <td class="px-6 py-4 text-center text-sm text-gray-600">01/10/2025 10:00</td>
                                <td class="px-6 py-4 text-center text-sm text-gray-600">01/10/2025 10:05</td>
                                <td class="px-6 py-4 text-center">
                                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold">Ho√†n th√†nh</span>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50 transition">
                                <td class="px-6 py-4">
                                    <p class="font-semibold text-gray-800">üì± Chia s·∫ª Facebook</p>
                                    <p class="text-xs text-gray-500">Trust-based</p>
                                </td>
                                <td class="px-6 py-4 text-center text-sm font-semibold text-orange-600">50</td>
                                <td class="px-6 py-4 text-center text-sm text-gray-600">02/10/2025 14:30</td>
                                <td class="px-6 py-4 text-center text-sm text-gray-600">02/10/2025 14:35</td>
                                <td class="px-6 py-4 text-center">
                                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold">Ho√†n th√†nh</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">‚öôÔ∏è C√†i ƒê·∫∑t H·ªá Th·ªëng</h2>
            <div class="bg-white rounded-lg p-6 shadow-md border border-gray-200">
                <p class="text-gray-600">System settings...</p>
            </div>
        </div>
        
    </div>
    
    <!-- Create Event Modal - FIXED: Only 1 Setup Banner at top -->
    <div id="createEventModal" class="modal">
        <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full m-4 max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-white border-b border-gray-200 px-8 py-6 flex items-center justify-between z-10">
                <h2 class="text-2xl font-bold text-gray-800">‚ûï T·∫°o Event M·ªõi</h2>
                <button onclick="closeModal('createEventModal')" class="text-gray-400 hover:text-gray-600 text-3xl leading-none">&times;</button>
            </div>
            
            <div class="px-8 py-6 space-y-8">
                <!-- SECTION 1: Setup Banner (AT TOP) -->
                <div>
                    <h3 class="text-lg font-bold text-gray-800 mb-2">üé® Setup Banner</h3>
                    <p class="text-sm text-gray-600 mb-4">Banner s·∫Ω hi·ªÉn th·ªã tr√™n trang ch·ªß cho user</p>
                    
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">T√™n event *</label>
                                <input type="text" id="eventName" placeholder="ƒê∆∞·ªùng ƒêua Sƒ© T·ª≠..." required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">M√£ event *</label>
                                <input type="text" id="eventCode" placeholder="DDST4" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ti√™u ƒë·ªÅ banner *</label>
                            <input type="text" id="bannerTitle" placeholder="ƒê∆∞·ªùng ƒêua Sƒ© T·ª≠" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">N·ªôi dung banner *</label>
                            <p class="text-xs text-gray-500 mb-2">N·ªôi dung s·∫Ω hi·ªÉn th·ªã tr√™n banner</p>
                            
                            <!-- Rich Text Editor Toolbar -->
                            <div class="border border-gray-300 rounded-t-lg bg-gray-50 px-3 py-2 flex items-center gap-2 flex-wrap">
                                <button type="button" onclick="formatText('bold')" class="px-2 py-1 hover:bg-gray-200 rounded text-sm font-bold" title="Bold">B</button>
                                <button type="button" onclick="formatText('italic')" class="px-2 py-1 hover:bg-gray-200 rounded text-sm italic" title="Italic">I</button>
                                <button type="button" onclick="formatText('underline')" class="px-2 py-1 hover:bg-gray-200 rounded text-sm underline" title="Underline">U</button>
                                <span class="text-gray-300">|</span>
                                <button type="button" onclick="formatText('insertUnorderedList')" class="px-2 py-1 hover:bg-gray-200 rounded text-sm" title="Bullet List">‚Ä¢ List</button>
                                <button type="button" onclick="formatText('insertOrderedList')" class="px-2 py-1 hover:bg-gray-200 rounded text-sm" title="Numbered List">1. List</button>
                                <span class="text-gray-300">|</span>
                                <select onchange="formatText('fontSize', this.value); this.value=''" class="text-sm border border-gray-300 rounded px-2 py-1">
                                    <option value="">C·ª° ch·ªØ</option>
                                    <option value="1">Nh·ªè</option>
                                    <option value="3">Trung b√¨nh</option>
                                    <option value="5">L·ªõn</option>
                                </select>
                            </div>
                            
                            <!-- Rich Text Editor Content -->
                            <div id="bannerContent" contenteditable="true" class="w-full border border-t-0 border-gray-300 rounded-b-lg px-4 py-3 min-h-[120px] focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none" placeholder="Nh·∫≠p n·ªôi dung banner..."></div>
                            <p id="charCount" class="text-xs text-gray-500 mt-1">0/500 k√Ω t·ª±</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Link th·ªÉ l·ªá (PDF) *</label>
                            <input type="url" id="rulesLink" placeholder="https://luyende.vn/event/ddst/the-le.pdf" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                    </div>
                </div>
                
                <!-- SECTION 2: Time Period -->
                <div>
                    <h3 class="text-lg font-bold text-gray-800 mb-4">‚è∞ Th·ªùi gian di·ªÖn ra</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ng√†y b·∫Øt ƒë·∫ßu *</label>
                            <input type="datetime-local" id="startDate" onchange="validateEventDates()" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ng√†y k·∫øt th√∫c *</label>
                            <input type="datetime-local" id="endDate" onchange="validateEventDates()" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">‚è∞ Timezone: GMT+7 (Gi·ªù Vi·ªát Nam)</p>
                    <p id="durationInfo" class="text-sm text-blue-600 font-semibold mt-2"></p>
                    
                    <!-- Active/Inactive Toggle -->
                    <div class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                        <div class="flex items-center justify-between mb-3">
                            <div>
                                <label class="text-sm font-bold text-gray-800">Tr·∫°ng th√°i Event</label>
                                <p class="text-xs text-gray-600 mt-1">Ch·ªâ c√≥ 1 event ƒë∆∞·ª£c Active trong c√πng kho·∫£ng th·ªùi gian</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="eventActive" onchange="validateEventActive()" class="sr-only peer">
                                <div class="w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"></div>
                            </label>
                        </div>
                        <div id="activeStatus" class="flex items-center gap-2">
                            <span class="px-3 py-1 bg-gray-200 text-gray-700 rounded-full text-xs font-semibold">Inactive</span>
                        </div>
                        <div id="activeWarning" class="hidden mt-3 p-3 bg-yellow-50 border-l-4 border-yellow-500 text-sm text-yellow-700">
                            ‚ö†Ô∏è <strong>C·∫£nh b√°o:</strong> ƒê√£ c√≥ event kh√°c active trong kho·∫£ng th·ªùi gian n√†y!
                        </div>
                        <div id="futureActiveInfo" class="hidden mt-3 p-3 bg-green-50 border-l-4 border-green-500 text-sm text-green-700">
                            ‚úì Event s·∫Ω t·ª± ƒë·ªông active v√†o <span id="autoActiveDate" class="font-semibold"></span>
                        </div>
                    </div>
                </div>
                
                <!-- SECTION 3: Task Selection -->
                <div>
                    <h3 class="text-lg font-bold text-gray-800 mb-4">üìù Ch·ªçn Nhi·ªám V·ª•</h3>
                    <p class="text-sm text-gray-600 mb-4">Ch·ªçn c√°c nhi·ªám v·ª• cho event (ƒëi·ªÉm c√≥ th·ªÉ ch·ªânh s·ª≠a)</p>
                    
                    <div class="space-y-3 max-h-96 overflow-y-auto border border-gray-200 rounded-lg p-4">
                        <!-- Task 1 -->
                        <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="task1" class="w-4 h-4 text-orange-600 rounded" onchange="updateSelectedTasks()">
                            <div class="flex-1">
                                <label for="task1" class="font-semibold text-gray-800 cursor-pointer">‚ö° ƒêƒÉng nh·∫≠p h√†ng ng√†y</label>
                                <p class="text-xs text-gray-500">Auto verification</p>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="number" value="20" min="1" class="w-20 border border-gray-300 rounded px-2 py-1 text-sm" disabled id="task1Points">
                                <span class="text-sm text-gray-600">ƒëi·ªÉm</span>
                            </div>
                        </div>
                        
                        <!-- Task 2 -->
                        <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="task2" class="w-4 h-4 text-orange-600 rounded" onchange="updateSelectedTasks()">
                            <div class="flex-1">
                                <label for="task2" class="font-semibold text-gray-800 cursor-pointer">üì± Chia s·∫ª Facebook</label>
                                <p class="text-xs text-gray-500">Trust-based</p>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="number" value="50" min="1" class="w-20 border border-gray-300 rounded px-2 py-1 text-sm" disabled id="task2Points">
                                <span class="text-sm text-gray-600">ƒëi·ªÉm</span>
                            </div>
                        </div>
                        
                        <!-- Task 3 -->
                        <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="task3" class="w-4 h-4 text-orange-600 rounded" onchange="updateSelectedTasks()">
                            <div class="flex-1">
                                <label for="task3" class="font-semibold text-gray-800 cursor-pointer">üë• M·ªùi 3 b·∫°n b√® (x√°c th·ª±c SƒêT)</label>
                                <p class="text-xs text-gray-500">Phone verified</p>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="number" value="100" min="1" class="w-20 border border-gray-300 rounded px-2 py-1 text-sm" disabled id="task3Points">
                                <span class="text-sm text-gray-600">ƒëi·ªÉm</span>
                            </div>
                        </div>
                        
                        <!-- Task 4 -->
                        <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="task4" class="w-4 h-4 text-orange-600 rounded" onchange="updateSelectedTasks()">
                            <div class="flex-1">
                                <label for="task4" class="font-semibold text-gray-800 cursor-pointer">üìö L√†m ƒë·ªÅ (ƒëi·ªÉm > 60%)</label>
                                <p class="text-xs text-gray-500">Auto score verify</p>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="number" value="30" min="1" class="w-20 border border-gray-300 rounded px-2 py-1 text-sm" disabled id="task4Points">
                                <span class="text-sm text-gray-600">ƒëi·ªÉm</span>
                            </div>
                        </div>
                        
                        <!-- Task 5 -->
                        <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="task5" class="w-4 h-4 text-orange-600 rounded" onchange="updateSelectedTasks()">
                            <div class="flex-1">
                                <label for="task5" class="font-semibold text-gray-800 cursor-pointer">üéµ Repost TikTok</label>
                                <p class="text-xs text-gray-500">Trust-based</p>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="number" value="50" min="1" class="w-20 border border-gray-300 rounded px-2 py-1 text-sm" disabled id="task5Points">
                                <span class="text-sm text-gray-600">ƒëi·ªÉm</span>
                            </div>
                        </div>
                        
                        <!-- Task 6 -->
                        <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="task6" class="w-4 h-4 text-orange-600 rounded" onchange="updateSelectedTasks()">
                            <div class="flex-1">
                                <label for="task6" class="font-semibold text-gray-800 cursor-pointer">üíö Chia s·∫ª Zalo Feed</label>
                                <p class="text-xs text-gray-500">Trust-based</p>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="number" value="50" min="1" class="w-20 border border-gray-300 rounded px-2 py-1 text-sm" disabled id="task6Points">
                                <span class="text-sm text-gray-600">ƒëi·ªÉm</span>
                            </div>
                        </div>
                    </div>
                    
                    <div id="selectedTasksSummary" class="mt-4 p-4 bg-green-50 border border-green-200 rounded-lg">
                        <p class="text-sm font-semibold text-green-800">
                            ƒê√£ ch·ªçn: <span id="taskCount">0</span> nhi·ªám v·ª• | 
                            T·ªïng ƒëi·ªÉm t·ªëi ƒëa: <span id="totalPoints">0</span> ƒëi·ªÉm
                        </p>
                    </div>
                </div>
                
                <!-- SECTION 4: Reward Config - NO MANUAL RULES -->
                <div>
                    <h3 class="text-lg font-bold text-gray-800 mb-4">üéÅ C·∫•u h√¨nh Gi·∫£i Th∆∞·ªüng</h3>
                    
                    <div class="flex items-center gap-4 mb-4">
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="hasReward" value="yes" checked onclick="toggleRewardSection(true)" class="w-4 h-4 text-orange-600">
                            <span class="text-sm font-medium text-gray-700">C√≥ gi·∫£i th∆∞·ªüng</span>
                        </label>
                        
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="hasReward" value="no" onclick="toggleRewardSection(false)" class="w-4 h-4 text-orange-600">
                            <span class="text-sm font-medium text-gray-700">Kh√¥ng gi·∫£i th∆∞·ªüng</span>
                        </label>
                    </div>
                    
                    <div id="rewardSection">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">M√£ gi·∫£i th∆∞·ªüng *</label>
                                <input type="text" id="rewardCodeInput" placeholder="DDST1, DDST2..." 
                                    onblur="fetchRewardInfo(this.value)"
                                    class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                <p class="text-xs text-gray-500 mt-1">üí° Nh·∫≠p m√£ ƒë·ªÉ t·ª± ƒë·ªông load th√¥ng tin & rules</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">S·ªë l∆∞·ª£ng gi·∫£i</label>
                                <input type="number" id="rewardQuantityInput" placeholder="Auto-fill..." readonly 
                                    class="w-full border border-gray-300 rounded-lg px-4 py-2 bg-gray-50 text-gray-600">
                                <p class="text-xs text-gray-500 mt-1">T·ª± ƒë·ªông ƒëi·ªÅn khi nh·∫≠p m√£</p>
                            </div>
                        </div>
                        
                        <!-- Auto-populated Reward Info with RULES -->
                        <div id="rewardInfoBox" class="hidden mt-4 p-4 bg-green-50 border border-green-200 rounded-lg">
                            <div class="flex items-start gap-2">
                                <span class="text-green-600 text-xl">‚úì</span>
                                <div class="flex-1">
                                    <p class="text-sm font-semibold text-green-800 mb-2">Th√¥ng tin gi·∫£i th∆∞·ªüng:</p>
                                    <div class="grid grid-cols-2 gap-2 text-sm text-gray-700 mb-3">
                                        <p><strong>üéÅ T√™n:</strong> <span id="displayRewardName">-</span></p>
                                        <p><strong>üí∞ Gi√° tr·ªã:</strong> <span id="displayRewardValue">-</span> VNƒê</p>
                                        <p><strong>üéØ S·ªë l∆∞·ª£ng:</strong> <span id="displayRewardQuantity">-</span> ph·∫ßn</p>
                                        <p><strong>üì¶ Lo·∫°i:</strong> <span id="displayRewardType">-</span></p>
                                    </div>
                                    
                                    <!-- Auto-populated Rules -->
                                    <div class="border-t border-green-200 pt-3">
                                        <p class="text-sm font-semibold text-green-800 mb-2">üìã ƒêi·ªÅu ki·ªán nh·∫≠n th∆∞·ªüng (auto t·ª´ DB):</p>
                                        <ul id="rewardRulesList" class="text-xs text-green-700 space-y-1 list-disc list-inside">
                                            <!-- Will be populated by fetchRewardInfo() -->
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="rewardErrorBox" class="hidden mt-4 p-4 bg-red-50 border border-red-200 rounded-lg">
                            <div class="flex items-start gap-2">
                                <span class="text-red-600 text-xl">‚ö†Ô∏è</span>
                                <div class="flex-1">
                                    <p class="text-sm font-semibold text-red-800">Kh√¥ng t√¨m th·∫•y m√£ gi·∫£i th∆∞·ªüng!</p>
                                    <p class="text-xs text-red-600 mt-1">Vui l√≤ng ki·ªÉm tra l·∫°i ho·∫∑c t·∫°o gi·∫£i th∆∞·ªüng m·ªõi ·ªü tab "Gi·∫£i th∆∞·ªüng"</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="sticky bottom-0 bg-gray-50 border-t border-gray-200 px-8 py-6 flex justify-end gap-3">
                <button onclick="closeModal('createEventModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-100 transition">
                    H·ªßy
                </button>
                <button onclick="submitEvent()" class="gradient-orange text-white px-6 py-2 rounded-lg font-semibold hover:shadow-lg transition">
                    üíæ T·∫°o event
                </button>
            </div>
        </div>
    </div>
    
    <!-- Create Reward Modal (UPDATED) -->
    <div id="createRewardModal" class="modal">
        <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full m-4 max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-white border-b border-gray-200 px-8 py-6 flex items-center justify-between z-10">
                <h2 class="text-2xl font-bold text-gray-800">üéÅ T·∫°o Gi·∫£i Th∆∞·ªüng M·ªõi</h2>
                <button onclick="closeModal('createRewardModal')" class="text-gray-400 hover:text-gray-600 text-3xl leading-none">&times;</button>
            </div>
            
            <div class="px-8 py-6 space-y-6">
                <!-- Th√¥ng tin c∆° b·∫£n -->
                <div>
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Th√¥ng tin c∆° b·∫£n</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">T√™n gi·∫£i th∆∞·ªüng *</label>
                            <input type="text" placeholder="VD: Voucher Urbox 50k" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">M√£ gi·∫£i th∆∞·ªüng *</label>
                            <input type="text" placeholder="VD: DDST1_50K" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                            <p class="text-xs text-gray-500 mt-1">M√£ duy nh·∫•t ƒë·ªÉ d·ªÖ t√¨m ki·∫øm</p>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">M√¥ t·∫£ ng·∫Øn</label>
                        <textarea rows="3" placeholder="M√¥ t·∫£ chi ti·∫øt v·ªÅ gi·∫£i th∆∞·ªüng..." class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"></textarea>
                        <p class="text-xs text-gray-500 mt-1">0/300 k√Ω t·ª±</p>
                    </div>
                </div>
                
                <!-- Lo·∫°i v√† gi√° tr·ªã -->
                <div>
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Lo·∫°i v√† Gi√° Tr·ªã</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ph√¢n lo·∫°i *</label>
                            <select class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                <option>Voucher</option>
                                <option>Ti·ªÅn m·∫∑t</option>
                                <option>Qu√† t·∫∑ng v·∫≠t ch·∫•t</option>
                                <option>ƒêi·ªÉm th∆∞·ªüng</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Gi√° tr·ªã (VNƒê) *</label>
                            <input type="number" placeholder="50000" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">S·ªë l∆∞·ª£ng *</label>
                            <input type="number" placeholder="1000" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                    </div>
                </div>
                
                <!-- ƒêi·ªÅu ki·ªán nh·∫≠n th∆∞·ªüng -->
                <div>
                    <h3 class="text-lg font-bold text-gray-800 mb-4">ƒêi·ªÅu Ki·ªán Nh·∫≠n Th∆∞·ªüng</h3>
                    
                    <div class="space-y-3">
                        <div class="flex items-center gap-3">
                            <input type="checkbox" id="condition-tasks" class="w-4 h-4 text-orange-600 rounded focus:ring-orange-500">
                            <label for="condition-tasks" class="text-sm text-gray-700">Ho√†n th√†nh t·ªëi thi·ªÉu</label>
                            <input type="number" placeholder="70" class="w-20 border border-gray-300 rounded px-2 py-1 text-sm">
                            <span class="text-sm text-gray-700">% nhi·ªám v·ª•</span>
                        </div>
                        
                        <div class="flex items-center gap-3">
                            <input type="checkbox" id="condition-points" class="w-4 h-4 text-orange-600 rounded focus:ring-orange-500">
                            <label for="condition-points" class="text-sm text-gray-700">ƒê·∫°t t·ªëi thi·ªÉu</label>
                            <input type="number" placeholder="500" class="w-20 border border-gray-300 rounded px-2 py-1 text-sm">
                            <span class="text-sm text-gray-700">ƒëi·ªÉm</span>
                        </div>
                        
                        <div class="flex items-center gap-3">
                            <input type="checkbox" id="condition-verified" class="w-4 h-4 text-orange-600 rounded focus:ring-orange-500">
                            <label for="condition-verified" class="text-sm text-gray-700">Y√™u c·∫ßu x√°c th·ª±c s·ªë ƒëi·ªán tho·∫°i</label>
                        </div>
                        
                        <div class="flex items-center gap-3">
                            <input type="checkbox" id="condition-rank" class="w-4 h-4 text-orange-600 rounded focus:ring-orange-500">
                            <label for="condition-rank" class="text-sm text-gray-700">Top</label>
                            <input type="number" placeholder="100" class="w-20 border border-gray-300 rounded px-2 py-1 text-sm">
                            <span class="text-sm text-gray-700">x·∫øp h·∫°ng cao nh·∫•t</span>
                        </div>
                    </div>
                </div>
                
                <!-- Nh√† cung c·∫•p (n·∫øu l√† voucher) -->
                <div id="providerSection">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Nh√† Cung C·∫•p</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">T√™n nh√† cung c·∫•p</label>
                            <input type="text" placeholder="VD: Urbox" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">API Integration</label>
                            <select class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                <option>Urbox API</option>
                                <option>Manual</option>
                                <option>Other</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="sticky bottom-0 bg-gray-50 border-t border-gray-200 px-8 py-6 flex justify-end gap-3">
                <button onclick="closeModal('createRewardModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-100 transition">
                    H·ªßy
                </button>
                <button class="gradient-orange text-white px-6 py-2 rounded-lg font-semibold hover:shadow-lg transition">
                    üíæ T·∫°o Gi·∫£i Th∆∞·ªüng
                </button>
            </div>
        </div>
    </div>
    
    <!-- JavaScript -->
    <script>
        // Tab Management
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
        }
        
        // Modal Management
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('show');
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }
        
        // Close modal on background click
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal(this.id);
                }
            });
        });
        
        // Rich Text Editor
        function formatText(command, value = null) {
            document.execCommand(command, false, value);
            document.getElementById('bannerContent').focus();
        }
        
        // Character Counter
        document.getElementById('bannerContent')?.addEventListener('input', function() {
            const charCount = this.textContent.length;
            const counter = document.getElementById('charCount');
            counter.textContent = `${charCount}/500 k√Ω t·ª±`;
            if (charCount > 500) {
                counter.classList.add('text-red-600');
            } else {
                counter.classList.remove('text-red-600');
            }
        });
        
        // Date Validation
        function validateEventDates() {
            const startDate = document.getElementById('startDate');
            const endDate = document.getElementById('endDate');
            const durationInfo = document.getElementById('durationInfo');
            
            if (!startDate.value || !endDate.value) return;
            
            const start = new Date(startDate.value);
            const end = new Date(endDate.value);
            const diffDays = Math.ceil((end - start) / (1000 * 60 * 60 * 24));
            
            if (end < start) {
                durationInfo.innerHTML = '‚ùå Ng√†y k·∫øt th√∫c ph·∫£i sau ng√†y b·∫Øt ƒë·∫ßu!';
                durationInfo.className = 'text-sm font-semibold text-red-600 mt-2';
            } else {
                durationInfo.innerHTML = `‚úì Th·ªùi gian: ${diffDays} ng√†y`;
                durationInfo.className = 'text-sm font-semibold text-green-600 mt-2';
            }
        }
        
        // Active Toggle Validation
        function validateEventActive() {
            const isActive = document.getElementById('eventActive').checked;
            const activeStatus = document.getElementById('activeStatus');
            const activeWarning = document.getElementById('activeWarning');
            const futureActiveInfo = document.getElementById('futureActiveInfo');
            const startDate = document.getElementById('startDate').value;
            
            // Update badge
            if (isActive) {
                activeStatus.innerHTML = '<span class="px-3 py-1 bg-green-500 text-white rounded-full text-xs font-semibold">‚úì Active</span>';
            } else {
                activeStatus.innerHTML = '<span class="px-3 py-1 bg-gray-200 text-gray-700 rounded-full text-xs font-semibold">Inactive</span>';
            }
            
            // Check overlap (mock - production s·∫Ω g·ªçi API)
            const hasOverlap = false;
            const start = new Date(startDate);
            const now = new Date();
            
            activeWarning.classList.add('hidden');
            futureActiveInfo.classList.add('hidden');
            
            if (isActive && hasOverlap) {
                activeWarning.classList.remove('hidden');
            } else if (isActive && start > now) {
                futureActiveInfo.classList.remove('hidden');
                document.getElementById('autoActiveDate').textContent = start.toLocaleDateString('vi-VN', {
                    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
                });
            }
        }
        
        // Task Selection Update
        function updateSelectedTasks() {
            let taskCount = 0;
            let totalPoints = 0;
            
            for (let i = 1; i <= 6; i++) {
                const checkbox = document.getElementById(`task${i}`);
                const pointsInput = document.getElementById(`task${i}Points`);
                
                if (checkbox.checked) {
                    taskCount++;
                    totalPoints += parseInt(pointsInput.value || 0);
                    pointsInput.disabled = false;
                } else {
                    pointsInput.disabled = true;
                }
            }
            
            document.getElementById('taskCount').textContent = taskCount;
            document.getElementById('totalPoints').textContent = totalPoints;
        }
        
        // Toggle Reward Section
        function toggleRewardSection(show) {
            const section = document.getElementById('rewardSection');
            if (show) {
                section.style.display = 'block';
            } else {
                section.style.display = 'none';
            }
        }
        
        // Fetch Reward Info with AUTO-POPULATE RULES
        function fetchRewardInfo(code) {
            if (!code) return;
            
            const rewardDatabase = {
                'DDST1': {
                    name: 'ƒê∆∞·ªùng ƒëua sƒ© t·ª≠ 1',
                    value: '5,000,000',
                    quantity: 100,
                    type: 'Voucher Urbox',
                    rules: [
                        'C√≥ x√°c th·ª±c SƒêT (b·∫Øt bu·ªôc)',
                        'Ho√†n th√†nh t·ªëi thi·ªÉu 80% nhi·ªám v·ª• trong event',
                        'T·ªïng ƒëi·ªÉm ƒë·∫°t >= 300 ƒëi·ªÉm',
                        'Th·ªùi gian tham gia: Trong kho·∫£ng th·ªùi gian event di·ªÖn ra'
                    ]
                },
                'DDST2': {
                    name: 'ƒê∆∞·ªùng ƒëua sƒ© t·ª≠ 2',
                    value: '15,000,000',
                    quantity: 156,
                    type: 'Voucher Urbox',
                    rules: [
                        'C√≥ x√°c th·ª±c SƒêT (b·∫Øt bu·ªôc)',
                        'Ho√†n th√†nh t·ªëi thi·ªÉu 90% nhi·ªám v·ª•',
                        'T·ªïng ƒëi·ªÉm ƒë·∫°t >= 450 ƒëi·ªÉm',
                        'M·ªùi th√†nh c√¥ng √≠t nh·∫•t 3 b·∫°n b√® tham gia'
                    ]
                },
                'DDST3': {
                    name: 'ƒê∆∞·ªùng ƒëua sƒ© t·ª≠ 3',
                    value: '10,000,000',
                    quantity: 1000,
                    type: 'Voucher Urbox',
                    rules: [
                        'C√≥ x√°c th·ª±c SƒêT (b·∫Øt bu·ªôc)',
                        'Ho√†n th√†nh t·ªëi thi·ªÉu 70% nhi·ªám v·ª•',
                        'T·ªïng ƒëi·ªÉm ƒë·∫°t >= 250 ƒëi·ªÉm'
                    ]
                }
            };
            
            const infoBox = document.getElementById('rewardInfoBox');
            const errorBox = document.getElementById('rewardErrorBox');
            const reward = rewardDatabase[code.toUpperCase()];
            
            if (reward) {
                // Populate reward info
                document.getElementById('displayRewardName').textContent = reward.name;
                document.getElementById('displayRewardValue').textContent = reward.value;
                document.getElementById('displayRewardQuantity').textContent = reward.quantity;
                document.getElementById('displayRewardType').textContent = reward.type;
                document.getElementById('rewardQuantityInput').value = reward.quantity;
                
                // Populate rules
                const rulesList = document.getElementById('rewardRulesList');
                rulesList.innerHTML = '';
                reward.rules.forEach(rule => {
                    const li = document.createElement('li');
                    li.textContent = rule;
                    rulesList.appendChild(li);
                });
                
                // Show success, hide error
                infoBox.classList.remove('hidden');
                errorBox.classList.add('hidden');
            } else {
                // Show error, hide success
                infoBox.classList.add('hidden');
                errorBox.classList.remove('hidden');
            }
        }
        
        // Reports Navigation - FIXED STRUCTURE
        let currentEventId = null;
        let currentUserId = null;
        
        function showEventWinners(eventId) {
            currentEventId = eventId;
            document.getElementById('reports-level1').style.display = 'none';
            document.getElementById('reports-level2').style.display = 'block';
            document.getElementById('reports-level2-tasks').style.display = 'none'; // Ensure tasks are hidden
            document.getElementById('eventNameL2').textContent = `Event ${eventId}`;
            
            // Mock data - production s·∫Ω load t·ª´ API
            const winnersData = [
                { name: 'Nguy·ªÖn VƒÉn A', userId: '124562', points: '100/100', rank: 'ü•á #1', completed: '10/10/2025' },
                { name: 'Tr·∫ßn Th·ªã B', userId: '124563', points: '95/100', rank: 'ü•à #2', completed: '11/10/2025' },
                { name: 'L√™ VƒÉn C', userId: '124564', points: '90/100', rank: 'ü•â #3', completed: '12/10/2025' }
            ];
            
            const tbody = document.getElementById('winnersTableBody');
            tbody.innerHTML = winnersData.map(winner => `
                <tr class="hover:bg-gray-50 transition">
                    <td class="px-6 py-4 font-semibold text-gray-800">${winner.name}</td>
                    <td class="px-6 py-4 text-sm text-gray-600">${winner.userId}</td>
                    <td class="px-6 py-4 text-center text-sm font-semibold text-orange-600">${winner.points}</td>
                    <td class="px-6 py-4 text-center text-sm font-semibold text-gray-800">${winner.rank}</td>
                    <td class="px-6 py-4 text-center text-sm text-gray-600">${winner.completed}</td>
                    <td class="px-6 py-4 text-center">
                        <button onclick="showUserTasks('${winner.userId}', '${eventId}')" class="text-blue-600 hover:text-blue-800 text-sm font-semibold">üëÅÔ∏è Chi ti·∫øt nhi·ªám v·ª•</button>
                    </td>
                </tr>
            `).join('');
        }

        // NEW: Show Task Stats
        function showEventTaskStats(eventId) {
            currentEventId = eventId;
            document.getElementById('reports-level1').style.display = 'none';
            document.getElementById('reports-level2').style.display = 'none';
            document.getElementById('reports-level2-tasks').style.display = 'block';
            document.getElementById('eventNameL2Tasks').textContent = `Event ${eventId}`;
            // In production, fetch data based on eventId here
        }

        function backToReportsLevel1FromTasks() {
            document.getElementById('reports-level2-tasks').style.display = 'none';
            document.getElementById('reports-level1').style.display = 'block';
        }
        
        function showUserTasks(userId, eventId) {
            currentUserId = userId;
            document.getElementById('reports-level2').style.display = 'none';
            document.getElementById('reports-level3').style.display = 'block';
            document.getElementById('userNameL3').textContent = `Nguy·ªÖn VƒÉn A`;
            document.getElementById('eventNameL3').textContent = `Event ${eventId}`;
            document.getElementById('userIdL3').textContent = userId;
            
            // Mock task details
            const tasksData = [
                {
                    name: '‚ö° ƒêƒÉng nh·∫≠p h√†ng ng√†y',
                    type: 'Auto verification',
                    points: 20,
                    startTime: '01/10/2025 10:00',
                    endTime: '01/10/2025 10:05',
                    status: 'Ho√†n th√†nh'
                },
                {
                    name: 'üì± Chia s·∫ª Facebook',
                    type: 'Trust-based',
                    points: 50,
                    startTime: '02/10/2025 14:30',
                    endTime: '02/10/2025 14:35',
                    status: 'Ho√†n th√†nh'
                },
                {
                    name: 'üë• M·ªùi 3 b·∫°n b√®',
                    type: 'Phone verified',
                    points: 100,
                    startTime: '03/10/2025 09:15',
                    endTime: '05/10/2025 18:20',
                    status: 'Ho√†n th√†nh'
                }
            ];
            
            const tbody = document.getElementById('userTasksTableBody');
            tbody.innerHTML = tasksData.map(task => `
                <tr class="hover:bg-gray-50 transition">
                    <td class="px-6 py-4">
                        <p class="font-semibold text-gray-800">${task.name}</p>
                        <p class="text-xs text-gray-500">${task.type}</p>
                    </td>
                    <td class="px-6 py-4 text-center text-sm font-semibold text-orange-600">${task.points}</td>
                    <td class="px-6 py-4 text-center text-sm text-gray-600">${task.startTime}</td>
                    <td class="px-6 py-4 text-center text-sm text-gray-600">${task.endTime}</td>
                    <td class="px-6 py-4 text-center">
                        <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold">${task.status}</span>
                    </td>
                </tr>
            `).join('');
        }
        
        function backToReportsLevel1() {
            document.getElementById('reports-level2').style.display = 'none';
            document.getElementById('reports-level1').style.display = 'block';
        }
        
        function backToReportsLevel2() {
            document.getElementById('reports-level3').style.display = 'none';
            document.getElementById('reports-level2').style.display = 'block';
        }
        
        // Submit Event
        function submitEvent() {
            // Validation
            const eventName = document.getElementById('eventName').value;
            const eventCode = document.getElementById('eventCode').value;
            const bannerTitle = document.getElementById('bannerTitle').value;
            const bannerContent = document.getElementById('bannerContent').textContent;
            const rulesLink = document.getElementById('rulesLink').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            
            if (!eventName || !eventCode || !bannerTitle || !bannerContent || !rulesLink || !startDate || !endDate) {
                alert('‚ö†Ô∏è Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß c√°c tr∆∞·ªùng b·∫Øt bu·ªôc (*)');
                return;
            }
            
            // Mock submit
            alert('‚úÖ Event ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng!\n\n' +
                  `T√™n: ${eventName}\n` +
                  `M√£: ${eventCode}\n` +
                  `Th·ªùi gian: ${new Date(startDate).toLocaleDateString('vi-VN')} - ${new Date(endDate).toLocaleDateString('vi-VN')}`);
            
            closeModal('createEventModal');
        }
    </script>
</body>
</html>